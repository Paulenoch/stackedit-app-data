# B-Tree（多叉平衡搜索树）
## 性质
1. n阶B树意思是每个node中最多有n-1个元素，每个node最多有n个子树
2. 根节点最少有一个元素两个分支，其他节点最少有[n/2]个分支，[n/2 - 1]个元素，[]向上取整
4. 所有的叶子节点在同一层
5. 节点内有序，任一元素的左子树都比该元素小，右子树都比该元素大
6. 失败节点指每个叶节点下一层的空节点，若查找到了失败节点，则返回查找失败
![输入图片说明](/imgs/2025-02-25/oWMpTPpjSkTN9HYo.png)

## 插入
1. 找到插入的位置进行插入
2. 若插入后节点内元素数量超出限制，将中间元素[m/2]上移动，在上移的位置分裂，若上移后父节点元素数量溢出，以此类推

插入19
![输入图片说明](/imgs/2025-02-25/mtZlgVY05BdCEcyI.png)
上溢出
![输入图片说明](/imgs/2025-02-25/9NMQRDDw36ZSZyLJ.png)
依旧上溢出
![输入图片说明](/imgs/2025-02-25/r33KZw6qaZTtpyVH.png)
依旧上溢出
![输入图片说明](/imgs/2025-02-25/f6OKCKgH39oObcAl.png)

## 删除
删除非叶节点元素都会转换成删除叶节点元素

若发生下溢出
![输入图片说明](/imgs/2025-02-25/2OeXfyoxkICPEIUe.png)
删除68后该节点元素数量小于2（5阶B树），兄弟节点元素数量够，可以借，
![输入图片说明](/imgs/2025-02-25/INhAXyIp3AxPeOQ1.png)
先将父节点的元素移入下溢出的节点中，再将兄弟节点中的元素移入父节点对应的位置中


![输入图片说明](/imgs/2025-02-25/WTUpO1qZ4kjlsCr6.png)
删除86之后发现左右兄弟节点都无法借，需与左边或右边的兄弟节点合并，先将父节点的元素下移至左侧待合并的节点，再进行合并，删除多余的子树，继续检查父节点是否下溢出，若溢出则相同操作
![输入图片说明](/imgs/2025-02-25/LRzj8ycjkBSHWG2R.png)
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTEwMTExNDgyMiwxMzE0NDMzMDcyLC0xND
EwOTMyMTc0LDI1MjcwMjk5N119
-->