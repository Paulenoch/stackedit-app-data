# 活动装配接口
第一步：活动装配activityArmory
-   **查询活动SKU列表**: 首先，通过 `activityRepository.queryActivitySkuListByActivityId` 从数据库中查询出该活动关联的所有 SKU (Stock Keeping Unit, 库存单位) 信息。每个 SKU 代表一种可参与的活动商品或资格。
    
-   **缓存SKU库存**: 遍历查询到的 SKU 列表，然后调用 `cacheActivitySkuStockCount` 方法。这个方法会将每个 SKU 的剩余库存数量 (`stockCountSurplus`) 存入 Redis 缓存。缓存的 Key 由一个固定的前缀 (`big_market_activity_sku_key_`) 和 SKU ID 拼接而成。
    
-   **预热活动次数**: 在循环中，还会调用 `activityRepository.queryRaffleActivityCountByActivityCountId`。这个方法会查询活动可参与的次数限制（总次数、每日次数、每月次数），并将查询结果缓存起来，供后续的抽奖资格校验使用。
    
-   **预热活动信息**: 最后，调用 `activityRepository.queryRaffleActivityByActivityId` 来查询活动的基本信息（如活动名称、描述、时间等），并将其缓存。

第二步：策略装配

<!--stackedit_data:
eyJoaXN0b3J5IjpbLTY1ODUwNDU3MiwtMTY3OTY3OTI4MSw0ND
A5MDU2MTldfQ==
-->