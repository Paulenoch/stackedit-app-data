# TCP/IP四层模型
1.  应用层：为计算机用户提供服务
2.  传输层：为两台主机进程间的通信提供通用的数据传输服务
3.  网络层：路由和寻址
4.  网络接口层：处理与物理网络介质的直接通信

### 为什么要设计四层模型
各层之间相互独立，提高了灵活性和可替换性

# 从输入URL到页面展示经历了哪些步骤
1. 输入URL
2. 浏览器根据DNS协议，获取域名对应的IP地址
3. 浏览器根据IP地址和端口号，向目标服务器发起一个TCP连接请求
4. 浏览器在TCP连接上，向服务器发起一个HTTP请求报文，请求获取网页内容
5. 服务器收到HTTP报文后，处理请求，并返回HTTP响应报文给浏览器
6. 浏览器收到HTTP响应报文后，解析请求，显示内容，
7. 不需要通信时，可主动关闭TCP连接

# HTTPS加密
SSL协议：非对称加密
使用非对称加密对密钥进行加密，后续使用该密钥进行对称加密

流程：
1. 服务端将公钥证书发送给客户端
2. 客户端验证服务器的证书
3. 验证通过，客户端生成一个用于会话的对称密钥
4. 客户端使用服务器的公钥对对称密钥进行加密，将加密后的密钥发给服务器
5. 服务器使用私钥对加密密钥解密，得到对称密钥
6. 后续使用对称密钥进行加密解密

# HTTP1.1
1. 支持长连接，缓存机制

# HTTP2.0
1. 多路复用
2. 二进制帧代替文本格式的报文进行数据传输
3. 服务器推送：可以在客户端请求一个资源时，将其他相关资源一并推送给客户端，从而减少了客户端的请求次数和延迟

# HTTP3.0
1. 基于QUIC（UDP），建立连接仅需0-RTT 或者 1-RTT

# WebSocket
WebSocket 是一种基于 TCP 连接的全双工通信协议，即客户端和服务器可以同时发送和接收数据。
WebSocket 协议本质上是应用层的协议，用于弥补 HTTP 协议在持久通信能力上的不足。客户端和服务器仅需一次握手，两者之间就直接可以创建持久性的连接，并进行双向数据传输。

# TCP/UDP区别
1. 是否面向连接
2. 是否可靠传输
3. 是否有状态
4. 传输效率
5. 传输形式：TCP面向字节流。UDP面向报文
6. 首部开销：TCP较大
7. UDP支持广播或多播

# 有了HTTP协议，为什么还需要RPC
RPC是C/S架构（Client/Server），软件只需要和自家公司的服务器连接（如杀毒软件）
HTTP是B/S架构（Browser/Server），不仅要访问自家服务器，也需要访问其他网站的服务器
RPC可以实现更高程度的定制化，比如消息头的自定义，序列化方式可以使用性能更好的ProtoBuf（Http是Json）

# 半连接队列和全连接队列
-   **半连接队列**（也称 SYN Queue）：当服务端收到客户端的 SYN 请求时，此时双方还没有完全建立连接，它会把半连接状态的连接放在半连接队列。
-   **全连接队列**（也称 Accept Queue）：当服务端收到客户端对 ACK 响应时，意味着三次握手成功完成，服务端会将该连接从半连接队列移动到全连接队列。如果未收到客户端的 ACK 响应，会进行重传，重传的等待时间通常是指数增长的。如果重传次数超过系统规定的最大重传次数，系统将从半连接队列中删除该连接信息。

# 四次挥手中为什么不能把服务端发送的ACK和FIN合并起来变成三次回收

因为服务端收到客户端断开连接的请求时，可能还有一些数据没有发完，这时先回复 ACK，表示接收到了断开连接的请求。等到数据发完之后再发 FIN，断开服务端到客户端的数据传送。

# 为什么第四次挥手客户端需要等待2*MSL时间后才进入
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTIwMzk1NDA2NjgsMjA1NDg5NjQ4MCwyMD
IzNjc0MTk1LDU5NzU2NDQwMywtMTUyOTUwNjYxOSw1OTIyODE5
MTEsLTE5MzExNDM0MTRdfQ==
-->