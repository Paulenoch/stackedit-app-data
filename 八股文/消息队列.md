# 消息队列的应用场景
- 异步处理，用户下单后即可返回结果，等数据库处理完成后再正式通知用户下单完成
- 削峰/限流：大量请求涌入的时候，先全部存放于消息队列中，避免直接把后端服务打垮掉
- 降低系统耦合度![输入图片说明](/imgs/2025-05-29/3wgp7kkU3X501wEY.png)
- 处理分布式事务：**服务A执行本地事务**，如扣款，并**发送一条“扣款成功”的消息到消息队列**（这个操作要保证与本地事务的原子性，比如本地消息表/事务消息等技术）。**服务B监听到消息后执行自己的本地事务**，如发货。如果**服务B处理失败，可以重试，或者通知服务A进行人工处理**。
- 保证数据按照特定的顺序被处理
- 延时/定时处理

# 引入消息队列可能会带来哪些问题
-   **系统可用性降低：** 系统可用性在某种程度上降低，为什么这样说呢？在加入 MQ 之前，你不用考虑消息丢失或者说 MQ 挂掉等等的情况，但是，引入 MQ 之后你就需要去考虑了！
-   **系统复杂性提高：** 加入 MQ 之后，你需要保证消息没有被重复消费、处理消息丢失的情况、保证消息传递的顺序性等等问题！
-   **一致性问题：** 我上面讲了消息队列可以实现异步，消息队列带来的异步确实可以提高系统响应速度。但是，万一消息的真正消费者并没有正确消费消息怎么办？这样就会导致数据不一致的情况了!


<!--stackedit_data:
eyJoaXN0b3J5IjpbLTk2NTE3MTQzMiwxMTI3MTIwNTc4LC0yMD
g4NzQ2NjEyXX0=
-->