RPC是解决分布式系统通信问题的框架，分布式系统的一大特点是高并发，为保证服务在高访问量、高并发的场景下，依旧稳定和高可用，需要从服务端和调用端进行保护

# V4.1 服务限流
当调用端发送请求过来时，服务端在执行业务逻辑之前先执行限流逻辑，如果发现访问量过大并且超出了限流的阈值，就让服务端直接抛回给调用端一个限流异常，否则就执行正常的业务逻辑。

常见限流算法：
- 固定窗口计数法：将时间划分为固定大小的窗口，规定每个窗口内的请求上限；优点：简单易实现；缺点：限流不够平滑，无法保证限流速率

- 滑动窗口计数法：例如我们的接口限流每分钟处理 60 个请求，我们可以把 1 分钟分为 60 个窗口。每隔 1 秒移动一次，每个窗口一秒只能处理不大于 `60(请求数)/60（窗口数）` 的请求， 如果当前窗口的请求计数总和超过了限制的数量的话就不再处理其他请求。当滑动窗口的格子划分的越多，滑动窗口的滚动就越平滑，限流的统计就会越精确。优点：可以应对激增的流量，颗粒度更小


<!--stackedit_data:
eyJoaXN0b3J5IjpbLTkzODEwMjg0M119
-->